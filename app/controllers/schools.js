// Generated by CoffeeScript 1.6.3
import Ember from 'ember';
var schoolsController;

schoolsController = Ember.ArrayController.extend({
  itemController: "school",
  sortProperties: ['createdAt'],
  sortAscending: true,
  schoolName: "",
  schoolType: {
    id: ''
  },
  schoolTypes: [
    {
      id: '',
      name: '-- Seleccionar --'
    }, {
      id: 'PUBLIC',
      name: 'PÃºblica'
    }, {
      id: 'PRIVATE',
      name: 'Privada'
    }
  ],
  schoolState: {
    id: ''
  },
  schoolStates: [
    {
      id: '',
      name: '-- Seleccionar --'
    }, {
      id: 'MX-DIF',
      name: 'Distrito Federal'
    }, {
      id: 'MX-AGU',
      name: 'Aguascalientes'
    }
  ],
  modalButtons: [
    Ember.Object.create({
      title: 'Cancelar',
      clicked: "cancel",
      dismiss: 'modal'
    }), Ember.Object.create({
      title: 'Guardar',
      type: "primary",
      clicked: "submit",
      id: "btn_saveNewSchool"
    })
  ],
  actions: {
    addSchool: function() {
      console.log("Add School!!");
      return Bootstrap.ModalManager.show('schoolModal');
    },
    submit: function() {
      var promise, school, schoolStateSelected;
      console.log(this.schoolStates);
      console.log(this.schoolState.id);
      schoolStateSelected = _.find(this.schoolStates, {
        'id': this.schoolState.id
      });
      console.log(schoolStateSelected.name);
      school = this.get('store').createRecord('school', {
        name: this.schoolName,
        type: this.schoolType.id,
        city: this.schoolCity,
        state: this.schoolState.id,
        createdAt: new Date()
      });
      this.set('schoolName', '');
      this.set('schoolCity', '');
      this.set('schoolType', '');
      this.set('schoolState', '');
      promise = school.save();
      return Bootstrap.ModalManager.hide('schoolModal', function(error) {
        school.rollback();
        return alert(error);
      });
    },
    cancel: function() {
      return console.log("Cancel!!");
    }
  }
});

export default schoolsController;
